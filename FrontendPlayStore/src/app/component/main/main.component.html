<div class="container-fluid" id="mainConfig" >
    <div class="row" id="rowConfi">
        <div class="col-12 col-sm-10 col-md-10 col-lg-6 col-xl-4" >
            <ul class="UlConfModal" style="padding: 0px;">
                <li>
                    <select class="select-css" [(ngModel)]="categoriaSeleccionda" id="select-css" (change)="SelectCategorias()">
                        <option *ngFor="let categoria of categorias"  [ngValue]="categoria._id">{{categoria.nombreCategoria}}</option>
                    </select>
                </li>
            </ul>
        </div>
        <button class="btn btn-warning btn-create-app col-6 col-sm-4 col-md-2 col-lg-4 col-xl-3" (click)="abrirModal(modalCreateApp)">Crear nueva app</button>
    </div>
    <!--div>
        nota: funciona hasta la validación si esta intalada o no en el modal.
    </div-->
    <div class="row" id="rowConfi1" >
        <div>
            <h1 >{{nombreCategoria}}</h1>
            <h3>{{descripcionCategoria}}</h3>
        </div>
        <div class="col-6 col-sm-6 col-md-4 col-lg-4 col-xl-3 col-xxl" *ngFor="let aplicacion of applicaciones" id="generarDinamicoLasApp">
            <div class="confiAppStyle">
                <a data-toggle="modal" data-target="#NombreModal">
                    <ul class="UlConfApp">
                        <li (click)="abrirInformacion(modalCambiarUsuario, aplicacion._id)" class="cursorPoint">
                            <img src="../../../assets/{{aplicacion.icono}}" class="ImgApss" alt="">
                        </li>
                        <li>{{aplicacion.nombre}}</li>
                        <li>{{aplicacion.desarrollador}}</li>
                        <li>
                            <div id="ContenidoEstrellas0" style="windth:100%" *ngIf="aplicacion.calificacion==1">
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>    
                            </div>
                            <div id="ContenidoEstrellas0" style="windth:100%" *ngIf="aplicacion.calificacion==2">
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>    
                            </div>
                            <div id="ContenidoEstrellas0" style="windth:100%" *ngIf="aplicacion.calificacion==3">
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>    
                            </div>
                            <div id="ContenidoEstrellas0" style="windth:100%" *ngIf="aplicacion.calificacion==4">
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>    
                            </div>
                            <div id="ContenidoEstrellas0" style="windth:100%" *ngIf="aplicacion.calificacion==5">
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>    
                            </div>
                        </li>
                        <li>${{aplicacion.precio}}.00 <button class="btn" (click)="eliminarApp(aplicacion._id)"><fa-icon [icon]="faTrash"></fa-icon> </button></li>
                    </ul>
                </a>
            </div>
        </div>
    </div>
</div>
<!-- Venta modal información de las app -->
<ng-template #modalCambiarUsuario let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title"> Información app</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
    </button>
    </div>
    <div class="modal-body">
        <div class="container-fluid">
            <div class="row" *ngFor="let appi of app">
                <div class="col-xl-12" id="ModalImagen">
                    <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                        <div class="carousel-inner">
                            <div *ngIf="imagen1" ngClass='active' class="carousel-item">
                                <img src="../../../assets/img/app-screenshots/1.webp" class="d-block w-100" alt="...">
                            </div>
                            <div *ngIf="imagen2" ngClass='active' class="carousel-item">
                                <img src="../../../assets/img/app-screenshots/2.webp" class="d-block w-100" alt="...">
                            </div>
                            <div *ngIf="imagen3" ngClass='active' class="carousel-item">
                                <img src="../../../assets/img/app-screenshots/3.webp" class="d-block w-100" alt="...">
                            </div>
                        </div>
                        <a class="carousel-control-prev"  href="#carouselExampleControls" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" (click)="siguienteImg()"  href="#carouselExampleControls" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </div>
                <hr>
                <div class="col-xl-4" id="ModalImagen">
                    <img src="../../../assets/{{appi.icono}}" alt="" class="ImgApss">
                </div>
                <div class="col-xl-8 infoApp">
                    <div class="col-xl-12">
                        <h1 class="nameApp" id="NombreModal">{{appi.nombre}}</h1>
                    </div>
                    <div class="col-xl-12">
                        <h1 class="nameDeveloper" id="desarrolladorModal">{{appi.desarrollador}}</h1>
                    </div>
                    <div class="col-xl-12">
                        <h1 class="nameDescription" id="InfoModal">{{appi.descripcion}}</h1>
                    </div>
                </div>
                <hr>
                <div id="ContenidoEstrellasModal0" style="display: block;margin-left: auto;margin-right: auto;"> 
                    <div id="ContenidoEstrellas0" style="windth:100%">
                        <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                        <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                        <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                        <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>
                        <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>
                        <span class="col-sm-2 col-md-2 col-lg-2 col-xl-2 col-2" style="font-size: 20px;color: #ADE552;" id="desarrolladorModal">{{appi.calificacion}}.0</span>
                    </div>
                </div>
                <div id="AppendText" class="row">
                <hr>

                <div *ngFor="let comentario of appi.comentarios" style="display: flex; border-bottom: 1px solid #F8F9FA;">
                    <div class="col-3">
                        <img src="../../../assets/img/user.webp" alt="" class="ImgApss" style="border-radius: 100%;">
                    </div>
                    <div class="col-9 divComentarios">
                        <div class="col-12">
                            <h1 style="font-size: 24px;" id="NombreModal">{{comentario.usuario}} </h1>
                            <h2> {{comentario.fecha}}</h2>
                        </div>
                        <div class="col-12">
                            <h1 style="font-size: 17px;">Comentarios:</h1>
                            <h1 style="font-size: 15px;" id="desarrolladorModal">{{comentario.comentario}}</h1>
                            <div id="ContenidoEstrellas0" style="windth:100%" *ngIf="comentario.calificacion==0">
                                <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>
                                <span>{{comentario.calificacion}}</span>
                            </div>
                            <div id="ContenidoEstrellas0" style="windth:100%" *ngIf="comentario.calificacion==1||comentario.calificacion=='1'">
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>
                                <span>{{comentario.calificacion}}</span>
                            </div>
                            <div id="ContenidoEstrellas0" style="windth:100%" *ngIf="comentario.calificacion==2||comentario.calificacion=='2'">
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>
                                <span>{{comentario.calificacion}}</span>
                            </div>
                            <div id="ContenidoEstrellas0" style="windth:100%" *ngIf="comentario.calificacion==3||comentario.calificacion=='3'">
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>
                                <span>{{comentario.calificacion}}</span>
                            </div>
                            <div id="ContenidoEstrellas0" style="windth:100%" *ngIf="comentario.calificacion==4||comentario.calificacion=='4'">
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconBlack" [icon]="faStar"></fa-icon>
                                <span>{{comentario.calificacion}}</span>
                            </div>
                            <div id="ContenidoEstrellas0" style="windth:100%" *ngIf="comentario.calificacion==5||comentario.calificacion=='5'">
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <fa-icon class="FaiconYellow" [icon]="faStar"></fa-icon>
                                <span>{{comentario.calificacion}}</span>
                            </div>
                        </div>
                    </div>
                    <hr>
                </div>
                    <div>
                        <h1 class="lettersPlusADD">Agregar un comentario</h1>
                        <button class="btn Plus" (click)="plusComent()"><fa-icon [icon]="faPlusCircle"></fa-icon></button>
                    </div>
                    <div *ngIf="openPlus">
                        <form [formGroup]="formularioComent">
                            Usuario : <input formControlName="usuario"  class="form-control" type="text" name="" id="" placeholder="Íngrese un usuario" required>
                            Comentario : <input formControlName="comentario"  class="form-control" type="text" name="" id="" placeholder="Íngrese un comentario">
                            Fecha : <input formControlName="fecha"  class="form-control" type="date" name="" id="" placeholder="Íngrese una fecha">
                            calificacion : 
                            <select name="" formControlName="calificación" class="form-control" id="">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                            </select>
                            <button [disabled]="!formularioComent.valid" class="btn UPForm" (click)="UpComent()">Enviar <fa-icon [icon]="faUpload"></fa-icon></button>
                        </form>
                    </div>
                    <div *ngIf="appi.instalada==false" style=" display: block; margin-left: auto; padding-right: 10px; ">
                        <input type="button" class="btn btn-secondary" value="Cancel">
                        <input type="button" class="btn btn-success" value="Instalar">
                    </div>
                    <div *ngIf="appi.instalada" style=" display: block; margin-left: auto; padding-right: 10px; ">
                        <input type="button" class="btn btn-danger" value="Desinstalar">
                        <input type="button" class="btn btn-success" value="Instalada">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-success" (click)="modal.close('Boton Cerrrar')">Close</button>
    </div>
</ng-template>
<ng-template #modalCreateApp let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title"> Crear App</h4>
        <button type="button" class="close btn btn-danger" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
    </button>
    </div>
    <div class="modal-body">
        <div class="col-12" *ngIf="categoriaSeleccionda==undefined">
            <h1 class="errorModal">
                Seleccione una categoria
            </h1>
        </div>
        <form class="row" [formGroup]="formularioApp" *ngIf="categoriaSeleccionda!=undefined">
            <!-- <div class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6">
                <label class=" form-control-label"></label>
                <select class="select-css selectCateModal" [(ngModel)]="categoriaModalApp" id="select-css">
                    <option *ngFor="let categoria of categoriasModal"  [ngValue]="categoria._id">{{categoria.nombreCategoria}}</option>
                </select>
            </div> -->
            <div class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6">
                <label class=" form-control-label" >Nombre</label>
                <input formControlName="nombre" class="form-control" type="text" name="" id="">
            </div>
            <div class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6">
                <label class=" form-control-label" >Descripción</label>
                <input formControlName="descripcion" class="form-control" type="text" name="" id="">
            </div>
            <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                <label class=" form-control-label" >Icono</label>
                <select formControlName="icono" class="form-control" name="" id="">
                    <option value="img/app-icons/1.webp">Mario</option>
                    <option value="img/app-icons/2.webp">Clash of Clans</option>
                    <option value="img/app-icons/5.webp">Doctor Mario</option>
                </select>
            </div>
            <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                <label class=" form-control-label" >Instalar</label>
                <select formControlName="instalada" class="form-control" name="" id="">
                    <option value="true">Si</option>
                    <option value="false">No</option>
                </select>
            </div>
            <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                <label class=" form-control-label" >App</label>
                <input formControlName="app" class="form-control" type="text" name="" id="">
            </div>
            <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                <label class=" form-control-label" >Calificación</label>
                <select formControlName="calificacion" class="form-control" name="" id="">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
            <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                <label class=" form-control-label" >Descargas</label>
                <input formControlName="descargas" class="form-control" type="number" name="" id="">
            </div>
            <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                <label class=" form-control-label" >Precio</label>
                <input formControlName="precio" class="form-control" type="number" name="" id="">
            </div>
            <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                <label class=" form-control-label" >Desarrollador</label>
                <input formControlName="desarrollador" class="form-control" type="text" name="" id="">
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-success" (click)="GuardarApp()">Guardar</button>
        <button type="button" class="btn btn-outline-success" (click)="modal.close('Boton Cerrrar')">Close</button>
    </div>
</ng-template>